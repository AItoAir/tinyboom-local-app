
const net = require('net');
const path = require('path');
const SOCKET_DIR = "/workarea/tmbs/";
const SOCKET_FILE = path.join(SOCKET_DIR, 'ex1.socket');
module.exports = function (sails) {
  return {
    initialize: async function () {
      sails.log.info('Initializing project hook... (`api/hooks/localsocket/`)');
      const client = net.createConnection(SOCKET_FILE);

      client.on("connect", function() {
        console.log("connected");

        client.write(JSON.stringify({'data': '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'}));
      });

      client.on("data", function(data) {
        console.log("data received:", data.toString('utf8'));
      });
    }
  };
};
